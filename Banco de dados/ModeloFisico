/* LÃ³gico_1: */

CREATE TABLE Pessoa_Cliente_Funcionario (
    nome VARCHAR,
    email VARCHAR,
    telefone VARCHAR,
    endereco VARCHAR,
    id_pessoa INTEGER,
    cpf VARCHAR,
    cartao_sus VARCHAR,
    id_cliente INTEGER,
    login VARCHAR,
    senha VARCHAR,
    id_funcionario INTEGER,
    tipo INTEGER,
    PRIMARY KEY (id_pessoa, id_cliente, id_funcionario)
);

CREATE TABLE Medicamento (
    nome VARCHAR,
    descricao VARCHAR,
    qtd_disponivel INTEGER,
    validade DATE,
    lote VARCHAR,
    id_medicamento INTEGER PRIMARY KEY
);

CREATE TABLE Retirada (
    dataRetirada VARCHAR,
    horaRetirada VARCHAR,
    id_retirada INTEGER PRIMARY KEY,
    qtd_retirada INTEGER,
    cpf_cliente VARCHAR,
    fk_Pessoa_Cliente_Funcionario_id_pessoa INTEGER
);

CREATE TABLE Contem (
    fk_Medicamento_id_medicamento INTEGER,
    fk_Retirada_id_retirada INTEGER
);
 
ALTER TABLE Retirada ADD CONSTRAINT FK_Retirada_2
    FOREIGN KEY (fk_Pessoa_Cliente_Funcionario_id_pessoa, ???)
    REFERENCES Pessoa_Cliente_Funcionario (id_pessoa, ???)
    ON DELETE CASCADE;
 
ALTER TABLE Contem ADD CONSTRAINT FK_Contem_1
    FOREIGN KEY (fk_Medicamento_id_medicamento)
    REFERENCES Medicamento (id_medicamento)
    ON DELETE RESTRICT;
 
ALTER TABLE Contem ADD CONSTRAINT FK_Contem_2
    FOREIGN KEY (fk_Retirada_id_retirada)
    REFERENCES Retirada (id_retirada)
    ON DELETE SET NULL;
